<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/perfil.css' %}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
    <body>
        <div class="container">
            <header>
                <nav class="navbar" id="navbar">
                    <div class="logo">
                        <strong><a href="/feed/" id="logo">Privato</a></strong>
                    </div>
                </nav>
            </header>
            <main>
                <section class="perfil">
                    <div class="cabecera-perfil">
                        <form id="form_avatar" action="" method="post">
                            <input type="hidden" value="{{ form_avatar }}" name="peticion">
                            {% csrf_token %}
                            <div id="avatar-container" class="grid-container" type="submit">
                                
                                {% for i in rango %}
                                <div id="box{{ i }}" class="grid-item"></div>
                                {% endfor %}
                            </div>
                            <div id="mensaje-avatar">Cambiar avatar</div>
                            <div class="estadisticas">
                                <p id="username" class="user-stats"><strong>{{ username }}</strong></p>
                                <p class="user-stats"><strong>{{ num_posts }}</strong> Posts</p>
                                <p class="user-stats"><strong>{{ amigos }}</strong> Amigos</p>
                            </div>  
                        </form>

                    </div>
                </section>
                <section class="posts">
                    <div class="container-posts">
                        <div class="div-errores" id="div-errores">
                            <div class="exclamacion">
                                <p id="p-exclamacion" >!</p>
                            </div>
                            <p id="p-errores"></p>
                        </div>
                        <div class="nuevo-post">
                            <form class="form-post" method="post">
                                <h1 class="header-post">Nueva publicacion</h1>
                                {% csrf_token %}
                                <input type="hidden" value="{{ form_post }}" name="peticion">
                                <div class="form-group">
                                    <input id="title" placeholder="Titulo de la publicacion" class="title-post" name="title" type="text">
                                </div>
                                <div class="form-group">
                                    <textarea id="textarea-post" name="content" class="contenido-input" placeholder="Â¿Que quieres compartir hoy?"></textarea>
                                </div>
                                <div class="form-group">
                                    <div id="contador-caracteres" class="contador-caracteres">0/950</div>
                                </div>
                                <div class="form-group">
                                    <button class="boton-add-post" id="save-post-btn">
                                        <p>Subir publicacion</p>
                                    </button>
                                </div>
                            </form>
                        </div>
                        <!--POST ANTIGUOS-->
                        <div class="posts-anteriores">
                            <h1 class="header-post">Posts anteriores</h1>
                            <div class="container-posts-anteriores">
                                {% for post in posts %}
                                    <div class="post-anterior">
                                        <div class="titulo-fecha">
                                            <p class="title-post-anterior"><strong>{{ post.title }}</strong></p>
                                            <p class="fecha-post-anterior">{{ post.fecha }}</p>
                                        </div>
                                        <p class="contenido-post-anterior">{{ post.contenido }}</p>
                                        <div class="likes-comentarios">
                                            <div class="likes-post-anterior">                                          
                                                    <div id="boton_like-{{ post.id }}" class="boton-like-comentario" type="submit">
                                                        <img id="imagen_like-{{ post.id }}" class="imagen-like" src="{% static 'img/like_vacio.png' %}" alt="">
                                                    </div>
                                                <div class="mensaje-likes">
                                                    <p id="p-likes">{{ post.likes }}</p>
                                                </div>
                                            </div>                                        
                                            <div class="comentarios-post-anterior">
                                                    <div id="boton_comentario-{{ post.id }}" class="boton-like-comentario" type="submit">
                                                        <img id="imagen_comentario-{{ post.id }}" class="imagen-comentario" src="{% static 'img/comentario_op2.png' %}" alt="">
                                                    </div>
                                                <div class="mensaje-comentarios">
                                                    <p>{{ post.comentarios }}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                        
                    </div>
                </section>
            </main>
        </div>                 
    </body> 
<script src="{% static 'js/jquery.js' %}"></script>
<script src="{% static 'js/perfil.js' %}"></script>
<script>
    var lista_colores = JSON.parse('{{ colores | escapejs }}');
    var id_posts = JSON.parse('{{ ids_posts | escapejs }}')
    rellenarAvatar(lista_colores)
    errorHandler("{{ error }}")
</script>
</html>

